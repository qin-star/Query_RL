# 项目文件结构说明

## ✅ 已完成的整理

### 新建文件夹：`sft_training_data/`

SFT训练数据转换相关的所有文件已整理到此文件夹中。

```
sft_training_data/
├── scripts/                          # 数据转换脚本
│   ├── convert_to_sft_format_v2.py  # 主转换脚本（最新版本）
│   └── README.md                     # 脚本使用说明
│
├── tests/                            # 测试脚本
│   ├── test_think_tag.py            # <think>标记测试
│   └── README.md                     # 测试说明
│
├── docs/                             # 说明文档
│   ├── System_Prompt修改说明.md      # System Prompt修改详解
│   ├── Think标记使用说明.md          # <think>标记功能说明
│   └── 数据格式对比说明.md           # V1/V2版本对比
│
├── data/                             # 数据输出目录（运行后生成）
│   └── sft/chengla_v2/              # 转换后的训练数据
│       ├── train_latest.jsonl       
│       ├── val_latest.jsonl         
│       ├── test_latest.jsonl        
│       ├── stats_report.json        
│       └── sample_examples.json     
│
└── README.md                         # 主README文档
```

---

## 📦 已删除的冗余文件

以下文件已被删除，因为功能已被新版本包含：

- ✅ `convert_to_sft_format.py` - 旧版本，已被v2替代
- ✅ `test_data_format.py` - 功能已被`test_think_tag.py`包含
- ✅ `organize_project.py` - 临时整理脚本（已完成任务）

---

## 📂 其他项目文件（未移动）

以下文件保留在根目录，与SFT训练数据转换无直接关系：

### DeepRetrieval相关
- `code/` - DeepRetrieval主代码目录
- `images/` - 项目图片资源
- `README.md` / `README_zh.md` - DeepRetrieval项目README

### Sales-RAG相关  
- `sales-rag/` - Sales-RAG系统代码
- `query_rewrite.py` - Query改写模块
- `langchain_query_rewriter.py` - LangChain集成
- `test_integration.py` - 集成测试脚本
- `sales_rag_*.py` - 其他Sales-RAG相关脚本

### 其他
- `Plan_md/` - 各类规划文档
  - `SalesRAG_Query_Rewrite_RL_Training_Plan.md` - RL训练方案
  - 其他规划文档...
- `vllm_host.sh` - vLLM部署脚本
- `prepare_training_data.py` - 原始数据准备脚本
- `upload_to_langchain.py` - LangChain上传工具

---

## 🚀 快速开始

### 使用SFT训练数据转换工具

```bash
# 进入SFT训练数据目录
cd sft_training_data

# 查看README
cat README.md

# 运行数据转换
cd scripts
python convert_to_sft_format_v2.py

# 运行测试
cd ../tests
python test_think_tag.py

# 查看文档
cd ../docs
```

---

## 📋 建议的进一步整理（可选）

如果希望进一步整理项目，可以考虑：

### 1. 创建 `sales_rag_integration/` 目录

将Sales-RAG集成相关文件移动到单独目录：

```
sales_rag_integration/
├── query_rewrite.py
├── langchain_query_rewriter.py
├── sales_rag_deepretrieval_trainer.py
├── sales_rag_kb_chat_integration.py
├── test_integration.py
└── upload_to_langchain.py
```

### 2. 整理 `Plan_md/` 目录

将规划文档按主题分类：

```
Plan_md/
├── rl_training/                      # RL训练相关
│   ├── SalesRAG_Query_Rewrite_RL_Training_Plan.md
│   └── Qwen32B_Query_Rewrite_RL_Training_Plan.md
│
├── integration/                      # 集成方案
│   ├── DeepRetrieval_SalesRAG_Integration_V2.md
│   └── DeepRetrieval_SalesRAG_Final_Implementation.md
│
└── guides/                           # 指南文档
    ├── QUICKSTART_zh.md
    └── 快速实施指南_5步上线.md
```

### 3. 创建 `scripts/` 目录（根目录）

将通用脚本集中管理：

```
scripts/
├── prepare_training_data.py
├── vllm_host.sh
└── deployment/
    └── ... (其他部署脚本)
```

---

## ⚙️ 项目结构最佳实践

推荐的完整项目结构：

```
DeepRetrieval-main/
├── code/                             # DeepRetrieval核心代码
├── sales-rag/                        # Sales-RAG系统
├── sft_training_data/                # ✅ SFT训练数据转换（已整理）
├── sales_rag_integration/            # Sales-RAG集成（建议创建）
├── scripts/                          # 通用脚本（建议创建）
├── docs/                             # 项目文档（建议创建）
│   ├── plans/                        # 规划文档
│   ├── guides/                       # 使用指南
│   └── api/                          # API文档
├── images/                           # 图片资源
└── README.md                         # 主README
```

---

## 📝 注意事项

1. **备份重要文件**：整理前建议备份项目
2. **检查依赖**：移动文件后检查import路径是否需要更新
3. **更新文档**：移动文件后更新相关文档中的路径引用
4. **Git提交**：整理后建议提交到版本控制

---

## ✨ 当前状态总结

| 项目 | 状态 | 说明 |
|------|------|------|
| SFT训练数据转换 | ✅ 已整理 | 移动到`sft_training_data/` |
| 冗余文件清理 | ✅ 已完成 | 删除旧版本和测试文件 |
| README文档 | ✅ 已创建 | 每个目录都有说明文档 |
| 其他模块 | ⏸️ 保持原状 | 可按需进一步整理 |

---

## 🎯 下一步

1. ✅ **开始使用SFT训练工具**：进入`sft_training_data/scripts/`运行转换
2. 📖 **阅读文档**：查看`sft_training_data/docs/`了解详细用法
3. 🧪 **运行测试**：确保工具正常工作
4. 🚀 **开始训练**：使用生成的数据进行SFT训练

---

## 📞 联系与支持

如有问题，请查看：
- `sft_training_data/README.md` - 主要使用指南
- `sft_training_data/docs/` - 详细文档
- 项目issue或联系维护者

